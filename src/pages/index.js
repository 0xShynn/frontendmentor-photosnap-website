import { Box, Flex, Heading, Text } from '@chakra-ui/layout'
import Head from 'next/head'
import NextImage from 'next/image'

import Layout from '../components/Layout'
import CustomLink from '../components/utils/CustomLink'
import { photoSnapGradient } from '../constants/styleToken'
import { getHomePage } from '../graphql/queries/getHomePage'

export const getStaticProps = async () => {
  const { page } = await getHomePage()

  return {
    props: {
      page,
    },
  }
}

export default function Home({ page }) {
  const heroes = page?.heroes ?? []

  console.log(page)
  return (
    <Layout
      data={{
        header: page.header,
        footer: page.footer,
      }}
    >
      <Head>
        <title>Next Chakra UI Starter</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <Flex direction="column">
        <Box bg="gray.300" maxW="container.lg2" mx="auto" w="full">
          {heroes.map((hero, index) => (
            <Box key={index}>
              <Box w="full">
                <NextImage
                  src={hero.image.url}
                  layout="responsive"
                  width={hero.image.width}
                  height={hero.image.height}
                  alt={hero.image.alt}
                />
              </Box>

              <Box
                bg={
                  hero.theme === 'dark'
                    ? 'primary.pureblack'
                    : 'primary.purewhite'
                }
                px="8"
              >
                {index === 0 && (
                  <Box h="6px" bgGradient={photoSnapGradient} w="126px" />
                )}
                <Flex py="16" direction="column">
                  <Heading
                    as="h1"
                    variant="h1"
                    color={
                      hero.theme === 'dark'
                        ? 'primary.purewhite'
                        : 'primary.pureblack'
                    }
                    mb="5"
                  >
                    {hero.title}
                  </Heading>
                  <Text
                    color={
                      hero.theme === 'dark' ? 'primary.lightgrey' : '#666666'
                    }
                    mb="5"
                  >
                    {hero.subtitle}
                  </Text>
                  <CustomLink
                    href={hero.link.href}
                    variant={hero.theme === 'dark' ? 'dark' : 'light'}
                    arrow="true"
                    alignSelf="flex-start"
                  >
                    {hero.link.label}
                  </CustomLink>
                </Flex>
              </Box>
            </Box>
          ))}
        </Box>
      </Flex>
    </Layout>
  )
}
